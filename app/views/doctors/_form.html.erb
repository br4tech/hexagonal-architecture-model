<div>
  <%= form_with(model: doctor, local: true) do |form| %>
    <%= hidden_field_tag :origin, request.path %>
    <% if doctor.errors.any? %>
      <% doctor.errors.full_messages.each do |message| %>
        <div class="notification is-warning">
          <%= message %>
        </div>
      <% end %>
    <% end %>

    <h4>Dados Cadastrais</h4>
    <div class="columns">
      <div class="field column is-half">
        <%= form.label :name, class: 'label' %>
        <div class="control">
          <%= form.text_field :name, class: 'input', autocomplete: "off", required: true %>
        </div>
      </div>

      <div class="field column">
        <%= form.label :document, class: 'label' %>
        <div class="control">
          <%= form.text_field :document, class: 'input is-document', autocomplete: "off", required: true %>
        </div>
      </div>

      <div class="field column">
        <%= form.label :crm, class: 'label' %>
    
        <div class="control">
          <%= form.text_field :crm, class: 'input', autocomplete: "off", required: true %>
        </div>
      </div>
    </div>

    <div class="columns">
      <div class="field column">
        <%= form.label :email, class: 'label' %>
        <div class="control">
          <%= form.text_field :email, class: 'input', autocomplete: "off", required: true %>
        </div>
      </div>

      <div class="field column">      
        <%= form.label :phone, class: 'label' %>
        <div class="control has-icons-right">
          <%= form.text_field :phone, class: 'input is-phone', autocomplete: "off", required: true %>
          <span class="icon is-small is-right">
            <i class="material-icons">phone</i>
          </span>
        </div>
      </div>

      <div class="field column">
        <%= form.label :gender, class: 'label' %>
        <div class="control">
          <div class="select is-fullwidth">
            <%= form.select :gender, options_for_select([['Masculino', 'male'], ['Feminino', 'female']], @doctor.gender) %>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <div data-controller="contract">
      <h4>Endereço</h4>
      <div class="columns">
        <div class="field is-3 column">
          <div class="columns">
            <div class="column is-8">
              <%= form.label :zipcode, class: 'label' %>
              <div class="control">
                <%= form.text_field :zipcode, class: 'input is-zipcode', autocomplete: "off" %>
              </div>
            </div>
            <div class="column is-4">
              <a data-remote="true" class="button is-fullwidth" data-action="click-> contract#loadAddress">buscar</a>
            </div>
          </div>
        </div>
        <div class="field is-3 column">
          <%= form.label :address, class: 'label' %>
          <div class="control">
            <%= form.text_field :address, class: 'input is-street', autocomplete: "off" %>
          </div>
        </div>
        <div class="field is-1 column">
          <%= form.label :number, class: 'label' %>
          <div class="control">
            <%= form.text_field :number, class: 'input is-number', autocomplete: "off" %>
          </div>
        </div>
        <div class="field is-5 column">
          <%= form.label :complement, class: 'label' %>
          <div class="control">
            <%= form.text_field :complement, class: 'input is-complement', autocomplete: "off" %>
          </div>
        </div>
      </div>
      <div class="columns">
        <div class="field is-3 column">
          <%= form.label :neighborhood, class: 'label' %>
          <div class="control">
            <%= form.text_field :neighborhood, class: 'input is-neighborhood', autocomplete: "off" %>
          </div>
        </div>
        <div class="field is-3 column">
          <%= form.label :city, class: 'label' %>
          <div class="control">
            <%= form.text_field :city, class: 'input is-city', autocomplete: "off" %>
          </div>
        </div>
        <div class="field is-2 column">
          <%= form.label :state, class: 'label' %>
          <div class="control">
            <%= form.text_field :state, class: 'input is-state', autocomplete: "off" %>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <h4 class="mt-2">Dados da Consulta</h4>
    <%= form.fields_for :expertises do |eform| %>
      <div class="columns">
        <div class="field column is-half">
          <%= eform.label :name, class: 'label' %>
          <div class="control">
            <%= eform.text_field :name, class: 'input', autocomplete: "off", required: true %>
          </div>
        </div>

        <div class="field column">
          <%= eform.label :duration, class: 'label' %>
          <div class="control">
            <%= eform.text_field :duration, class: 'input', autocomplete: "off" %>
          </div>
        </div>
        <div class="field column">
          <%= eform.label :price, class: 'label' %>
          <div class="control">
            <%= eform.text_field :price, class: 'input', autocomplete: "off" %>
          </div>
        </div>
      </div>

      <div class="columns">
        <div class="column is-narrow">
          <div class="field">
            <%= eform.label :confirm, class: 'label' %>
            <div class="control">
              <%= eform.label :confirm, value: true, class: 'custom-radio' do %>
                <%= eform.radio_button :confirm, true %> <span>Sim</span>
              <% end %>
              <%= eform.label :confirm, value: false, class: 'custom-radio' do %>
                <%= eform.radio_button :confirm, false %> <span>Não</span>
              <% end %>
            </div>
          </div>
        </div>
        <div class="column is-narrow">
          <div class="field">
            <%= eform.label :returns, class: 'label' %>
            <div class="control">
              <%= eform.label :returns, value: true, class: 'custom-radio' do %>
                <%= eform.radio_button :returns, true %> <span>Sim</span>
              <% end %>
              <%= eform.label :returns, value: false, class: 'custom-radio' do %>
                <%= eform.radio_button :returns, false %> <span>Não</span>
              <% end %>
            </div>
          </div>
        </div>
        <div class="field column is-narrow">
          <%= eform.label :days_to_return, class: 'label' %>
          <div class="control">
            <%= eform.text_field :days_to_return, class: 'input', autocomplete: "off" %>
          </div>
        </div>
      </div>

      <div class="columns">
        <div class="field column">
          <%= eform.label :observations, class: 'label' %>
          <div class="control">
            <%= eform.text_area :observations, class: 'input', rows: 5 %>
          </div>
        </div>
      </div>
    <% end %>
    <div class="columns is-centered">
      <div class="field column is-half">
        <div class="columns">
          <div class="column">
            <%= link_to 'Cancelar', :back, class: 'button is-primary is-outlined is-fullwidth' %>
          </div>
          <div class="column">
            <%= form.submit 'Salvar', class: 'button is-primary is-fullwidth' %>
          </div>
        </div>
      </div>
    </div>

  <% end %>
</div>
<br />
<%= link_to offices_path, class: 'is-flex is-back' do %>
  <i class="material-icons">arrow_back</i> Cancelar
<% end %>